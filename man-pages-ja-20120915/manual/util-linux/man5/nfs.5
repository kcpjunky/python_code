.\" nfs.5 "Rick Sladkey" <jrs@world.std.com>
.\" Wed Feb  8 12:52:42 1995, faith@cs.unc.edu: updates for Ross Biro's
.\" patches. "
.\"
.\" Japanese Version Copyright (c) 1996, 1998
.\"	SUMI Yasutaka and NAKANO Takeo, all rights reserved.
.\" Translated 2 Jul 1996 by SUMI Ysutaka <sum@liniere.gen.u-tokyo.ac.jp>
.\" Modified Wed 12 Aug 1998 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\" Modified Tue  5 Jun 2001 by Kentaro Shirakata <argrath@ub32.org>
.\" Updated Fri 16 Oct 2002 by Kentaro Shirakata <argrath@ub32.org>
.\"
.TH NFS 5 "20 November 1993" "Linux 0.99" "Linux Programmer's Manual"
.SH 名前
nfs \- NFS 関係の fstab フォーマットとオプション
.SH 書式
.B /etc/fstab
.SH 説明
.I fstab
ファイルにはファイルシステムをマウントする場所と、その時に用いるオプショ
ンとが記述されている。
NFS マウントの場合は、マウントの対象にする NFS サーバ−名と、そのサーバー
でエキスポートされているディレクトリ、マウントポイントにするロー
カルディレクトリ、ファイルシステムのマウント方法を制御する NFS 固有の
オプション、が記述される。
.P
以下は \fI/etc/fstab\fP ファイルにおける  NFS マウントの記述例である。
.sp
.nf
.ta 2.5i +0.75i +0.75i +1.0i
server:/usr/local/pub	/pub	nfs	rsize=8192,wsize=8192,timeo=14,intr
.fi
.DT
.SS オプション
.TP 1.5i
.I rsize=n
NFS サーバからファイルを読み込む際に、 NFS が用いるバッファのバイト数
を指定する。デフォルト値はカーネルに依存する。現在は 1024 バイト。
(しかし
.I rsize=8192
でうまく動作するようなら、転送速度は大きく向上する。)
.TP 1.5i
.I wsize=n
NFS サーバにファイルを書き込む際に、 NFS が用いるバッファのバイト数を
指定する。デフォルト値はカーネルに依存する。現在は 1024 バイト。
(しかし
.I wsize=8192
でうまく動作するようなら、転送速度は大きく向上する。)
.TP 1.5i
.I timeo=n
RPC タイムアウトの後、最初の再送を行うまでの時間を 1/10 秒単位で指定す
る。デフォルトは 7（つまり 0.7 秒）。最初のタイムアウトの後は、タイム
アウトの時間は倍々される。これはタイムアウトが最大値の 60 秒になるか、
あるいは再送の回数が指定した値よりも大きくなって、メジャータイムアウト
となるまで続けられる。メジャータイムアウトになると、ファイルシステムがハード
マウントされている場合には、新たなタイムアウトシーケンスが初期値を 2 
倍にして再び試みられる（シーケンス内部でのタイムアウトは倍々）。タイム
アウトの最大値は常に 60 秒である。ネットワークが混雑している、サーバが
遅い、経路に複数のルータまたはゲートウェイがある、などの場合には、このタ
イムアウトを増やすと全体の性能を向上させることができるかもしれない。
.TP 1.5i
.I retrans=n
マイナータイムアウトと再送の合計数がこの値を超えるとメジャータイムアウ
トとなる。デフォルトは 3 回。メジャータイムアウトが起こると、ファイル
操作は中断されるか、あるいは"server not responding" のメッセージがコン
ソールに表示される。
.TP 1.5i
.I acregmin=n
一般のファイル (regular file) の属性 (attribute) がキャッシュされる
最小の時間を秒単位で指定する。
この時間内では、サーバーへの新たな情報の問い合わせは行われない。
デフォルトは 3 秒。
.TP 1.5i
.I acregmax=n
一般のファイルの属性がキャッシュされる最大の時間を秒単位で指定する。
この時間を越えると、必ずサーバーへ新たな情報の問い合わせが行われる。
デフォルトは 60 秒。
.TP 1.5i
.I acdirmin=n
ディレクトリの属性がキャッシュされる最小の時間を秒単位で指定する。
この時間内では、サーバーへの新たな情報の問い合わせは行われない。
デフォルトは 30 秒。
.TP 1.5i
.I acdirmax=n
ディレクトリの属性がキャッシュされる最大の時間を秒単位で指定する。
この時間を越えると、必ずサーバーへ新たな情報の問い合わせが行われる。
デフォルトは 60 秒。
.TP 1.5i
.I actimeo=n
.I acregmin,
.I acregmax,
.I acdirmin,
.I acdirmax
すべてを同じ値にする。デフォルト値はない。
.TP 1.5i
.I retry=n
フォアグラウンド、またはバックグラウンドでの NFS マウントオペレーショ
ンが、リトライを放棄するまでの時間を指定する。デフォルトは 10000 分
(だいたい一週間) である。
.TP 1.5i
.I namlen=n
NFS サーバが RPC マウントプロトコルのバージョン 2 をサポートしていない
場合に、このオプションを用いるとリモートファイルシステムにおいてサポー
トされているファイル名の最大長を指定できる。これは POSIX pathconf 関数
をサポートするために用いられる。デフォルトは 255文字。
.TP 1.5i
.I port=n
NFS サーバに接続する際のポート番号を指定する。指定が 0 (デフォルト) の
場合、用いるべきポート番号をリモートホストのポートマッパーに尋ねる。も
しリモートホストの NFS デーモンがポートマッパーに登録されていなければ、
一般的なNFS ポート番号である 2049 を使用する。
.TP 1.5i
.I mountport=n
.B mountd
のポート番号を指定する。
.TP 1.5i
.I mounthost=name
.B mountd
が起動されているホスト名を指定する。
.TP 1.5i
.I mountprog=n
リモートホストの mount デーモンに接続する際に、通常と異なる RPC プログ
ラム番号を用いる。このオプションは複数の NFS サーバが動作しているホス
トに対して用いると便利である。デフォルトは 100005 で、これは mount デー
モンに対して標準的に用いられるプログラム番号である。
.TP 1.5i
.I mountvers=n
リモートホストの mount デーモンに接続する際に、通常と異なる RPC バージョ
ン番号を用いる。このオプションは複数の NFS サーバが動作しているホスト
に対して用いると便利である。デフォルトは 1。
.TP 1.5i
.I nfsprog=n
リモートホストの NFS デーモンに接続する際に、通常と異なる RPC プログ
ラム番号を用いる。このオプションは複数の NFS サーバが動作しているホス
トに対して用いると便利である。デフォルトは 100003 で、これは NFS デー
モンに対して標準的に用いられるプログラム番号である。
.TP 1.5i
.I nfsvers=n
リモートホストの NFS デーモンに接続する際に、通常と異なる RPC バージョ
ン番号を用いる。このオプションは複数の NFS サーバが動作しているホスト
に対して用いると便利である。デフォルトは 2。
.TP 1.5i
.I nolock
NFS ロックを無効にする。lockd を起動しない。
これは古い NFS サーバーに使わなくてはならない。
.TP 1.5i
.I bg
最初の NFS マウントの試行がタイムアウトになったときに、バックグラウン
ドでマウントを試み続ける。マウント動作がバックグラウンドになると、その 
NFS サーバーに対して引き続き行われることになっている、他の mount 動作
もただちにバックグラウンドになる。これらに対して、最初のマウント試行は
行われない。マウントポイントが失われると、タイムアウトと同じように扱わ
れる。 NFS マウントのネストを許すためである。
.TP 1.5i
.I fg
最初の NFS マウントの試行がタイムアウトになったときに、再試行をフォア
グラウンドで行う。これは
.I bg
の反対の意味を持つ指定であり、こちらがデフォルト。
.TP 1.5i
.I soft
NFS へのファイル操作がメジャータイムアウトとなった場合、呼び出したプロ
グラムに対し I/O エラーを返す。デフォルトでは、ファイル操作を無期限に
再試行し続ける。
.TP 1.5i
.I hard
NFS へのファイル操作がメジャータイムアウトとなった場合、コンソールに
"server not responding"と表示し、ファイル操作を無期限に再試行し続ける。
これがデフォルトの動作である。
.TP 1.5i
.I intr
NFS へのファイル操作がメジャータイムアウトとなり、かつその NFS 接続が 
hard マウントされている場合、シグナルによるファイル操作の中断を許可し、
中断された場合には呼び出したプログラムに対して EINTR を返す。デフォル
トではファイル操作の中断を許さない。
.TP 1.5i
.I posix
POSIX の手法を用いて NFS ファイルシステムをマウントする。ファイル名の
最大長がマウントサーバに問い合わされるようになり、 NFS ファイルシス
テムが POSIX pathconf コマンドを正しくサポートできるようになる。
これを行うためには、リモートホストが RPC マウントプロトコルのバージョ
ン 2 をサポートしていなければならない。多くの NFS サーバはバージョン 1 
しかサポートしていない。
.TP 1.5i
.I nocto
ファイルを作成するときに、新たな属性の取得を抑制する。
.TP 1.5i
.I noac
属性のキャッシングのすべてを完全に無効にする。これはサーバの性能を低下さ
せるが、 2 つの異なる NFS クライアントの両方が、サーバ上の共通のファイ
ルシステムに頻繁に書き込みをしている場合に、正しい結果をそれぞれのクラ
イアントに返すことを保証する。
.TP 1.5i
.I tcp
NFS ファイルシステムのマウントに、デフォルトの UDP プロトコルではなく 
TCP プロトコルを用いる。多くの NFS サーバは UDP しかサポートしていない。
.TP 1.5i
.I udp
NFS ファイルシステムのマウントに UDP プロトコルを用いる。こちら
がデフォルトである。
.P
数値を指定しないオプションすべてに対して、それぞれ no を前置したオプショ
ンが存在する。例えば、 nointr はファイル操作の中断を許可しない。
.SH ファイル
.I /etc/fstab
.SH 関連項目
.BR fstab "(5), " mount "(8), " umount "(8), " exports (5)
.SH 著者
"Rick Sladkey" <jrs@world.std.com>
.SH バグ
posix オプションと nocto オプションは mount によって受け入れられるが、
現在のところは単に無視される。
.P
tcp および namlen オプションは実装されているが、現在のところ Linux カー
ネルではサポートされていない。
.P
umount コマンドは、 NFS ファイルシステムがアンマウントされたときにサー
バに通知するべきである。
